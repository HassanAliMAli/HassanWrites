name = "edgemaster-blog"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Pages Configuration
[pages_build_config]
build_command = "npm run build"
destination = "dist"

# D1 Database Binding
[[d1_databases]]
binding = "DB"
database_name = "edgemaster-db"
database_id = "edgemaster-db-id" # Placeholder

# R2 Bucket Binding
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "edgemaster-media"

# KV Namespace Binding
[[kv_namespaces]]
binding = "CONFIG_KV"
id = "edgemaster-config-id" # Placeholder

# Service Binding to Backend Worker
[[services]]
binding = "BACKEND"
service = "edgemaster-backend"

# Analytics Engine
[[analytics_engine_datasets]]
binding = "ANALYTICS"
dataset = "edgemaster_events"

# Durable Objects
[[durable_objects.bindings]]
name = "EDITOR_DO"
class_name = "EditorSession"
script_name = "editor-do"

[[durable_objects.bindings]]
name = "DASHBOARD_DO"
class_name = "DashboardStats"
script_name = "dashboard-do"

# Migrations
[[migrations]]
tag = "v1"
new_classes = ["EditorSession", "DashboardStats"]
